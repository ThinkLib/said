@model Said.Models.Article
@{
    ViewBag.Title = Model.STitle + " - 听说";
    Layout = "~/Areas/Wap/Views/Shared/_LayoutWap.cshtml";
    string SourceSaidImage = Said.Common.ConfigInfo.SourceSaidPath;
    string SourceMusicImage = Said.Common.ConfigInfo.SourceMusicImagePath;
    string SourceMusicDir = Said.Common.ConfigInfo.SourceMusicPath;
    bool userLike = (bool)ViewData["userLike"];
}
<div class="banner">
    <div class="banner-bg" style="background-image:url(@(SourceSaidImage)@(Model.Image.IFileName));"></div>
</div>
<section class="content">
    <div class="displaybox music-player">
        <div class="info">
            <h3>@Model.Song.SongName</h3>
            <div>
                <a title="Album" class="link" target="_blank" href="http://www.sogou.com/web?query=@Url.Encode(Model.Song.SongAlbum)&ie=utf8">@Model.Song.SongAlbum</a>
            </div>
        </div>
        <div class="player">
            <a href="javascript:;" id="play-btn said-player-play" class="play-btn"><i class="fa fa-play fa-2x"></i></a>
            <a href="javascript:;" class="play-btn palyer-stop" id="said-player-stop" style="display: none;"><i class="fa fa-stop fa-2x"></i></a>
        </div>
    </div>
    <article class="music-content" id="said-content">
        <h1 class="blog-title">@Model.STitle</h1>
        <section class="blog-content">@(new HtmlString(Model.SHTML))</section>
    </article>
    <section class="blog-more-info">
        <div class="blog-more-head">
            <div class="displaybox">
                <div class="info-date"><time>@Model.Date.ToString("yyyy/MM/dd HH:mm")</time></div>
                <div class="info-like">
                    <a href="javascript:;" class="@(userLike?"likeIt":string.Empty)" data-like="@(userLike?"true":"false")" title="我喜欢" id="said-like">
                        <!--fa-heart--><i class="fa fa-heart-o"></i><span class="like-sum" id="likeCount">@Model.Likes</span>
                    </a>
                </div>
            </div>
            <ul class="blog-info">
                <li><a href="/Said" class="blog-info-more">查看更多我的文章</a></li>
                <li><a class="licenses licenses-cc" href="http://creativecommons.org/licenses/by/3.0/cn/">CC BY 3.0 CN</a></li>
                <li><a class="licenses-link" href="http://creativecommons.org/licenses/by/3.0/cn/">本文采用创作共用署名3.0中国大陆版许可证（Creative Commons Attribution 3.5 China Mainland License）授权</a></li>
            </ul>
        </div>
        <section class="music-song"></section>
        <audio id="said-player" autoplay="autoplay" height="0" width="0" src="@(SourceMusicDir+Model.Song.SongFileName)"></audio>
    </section>
</section>

@section Css{
    <link href="@Url.Content("~/Content/wap/style/article.css?v=1.0")" rel="stylesheet" />
}

@section FootJs{
    <script>
        var saidId = "@Model.SaidId";
    </script>
    <script>
        require(['jquery', 'so'], function ($, so) {
            var $player = $('#said-player'),//播放器
                $playBtn = $('#said-player-play'),//播放
                $stopBtn = $('#said-player-stop'),//停止
                togglePlay = function (isPlay) {//切换显示播放按钮
                    if (isPlay) {
                        $playBtn.hide();
                        $stopBtn.show();
                    } else {
                        $playBtn.show();
                        $stopBtn.hide();
                    }
                };


            //停止
            $stopBtn.on('click', function () {
                togglePlay(false);
            });
            //播放
            $playBtn.on('click', function () {
                togglePlay(false);
            });
            //允许播放
            $player.on('play', function () {
                togglePlay(true);
            });
            //播放结束
            $player.on('ended', function () {
                togglePlay(false);
            });
        });
    </script>
}
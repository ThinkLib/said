@{
    ViewBag.Title = "站点日志 - 在日志的字里行间看到站点的状态";
    Layout = "~/Areas/Back/Views/Shared/_LayoutBack.cshtml";
    FileInfo[] errorLogFiles = ViewData["errorLogFiles"] as FileInfo[];
    FileInfo[] infoLogFiles = ViewData["infoLogFiles"] as FileInfo[];
}

<ol class="breadcrumb">
    <li><a href="/Back">Home</a></li>
    <li>站点中心</li>
    <li>站点日志</li>
    @*<li class="g-help"><a href="javascript:;" id="said-help-btn" title="帮助"><i class="fa fa-question-circle"></i></a></li>*@
</ol>

<div ms-controller="vmPage">
    <div class="bs-table">
        <div class="navbar-form navbar-left table-tool" id="custom-bar">
            <div class="data-form">
                <input readonly="" autocomplete="off" class="form-control" ms-dom="queryDate" data-date-today-btn="true" data-date-language="zh-CN" data-date-format="yyyy-mm-dd" placeholder="筛选日期" value="" size="16">
                <button class="btn btn-success" ms-click="toggleShowStatus(true)">&#12288;新增&#12288;</button>
            </div>
        </div>
        <table data-toolbar="#custom-bar" id="btTable" class="table table-hover table-striped" data-striped="true" data-show-toggle="true" data-show-columns="true" data-search="true" data-pagination="true"></table>
    </div>
</div>

@section Css{
    @Styles.Render("~/static/back/css/home.sitelog.css", "~/static/back/css/bootstrap-table.css", "~/static/back/css/bootstrap-date.css")
}

@section FootJs{
    @Scripts.Render("~/static/back/js/home.sitelog.js")
    <script>
        var ErrorLogDatas = [];
        var InfoLogDatas = [];
        @if (errorLogFiles != null && errorLogFiles.Length > 0)
        {
            foreach (var item in errorLogFiles)
            {
                Write(new HtmlString(string.Format("ErrorLogDatas.push({{ 'Name': '{0}', LastWriteTime: '{1}', Length: '{2}',Type: 'error' }});",item.Name,item.LastWriteTime, item.Length)));
            }
        }
        @if (infoLogFiles != null && infoLogFiles.Length > 0)
        {
            foreach (var item in infoLogFiles)
            {
                Write(new HtmlString(string.Format("InfoLogDatas.push({{ 'Name': '{0}', LastWriteTime: '{1}', Length: '{2}',Type: 'info' }});", item.Name, item.LastWriteTime, item.Length)));
            }
        }
    </script>
    <script>
        var Action = {
            DownLoad: '@Url.Action("DownLoad", "Site")',
        };

        require(['home.sitelog'], function (view) {
            view(ErrorLogDatas, InfoLogDatas, Action);
        });


    </script>
}
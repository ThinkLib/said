@{
    ViewBag.Title = "Said后台管理系统 - 添加Blog";
    Layout = "~/Areas/Back/Views/Shared/_LayoutBack.cshtml";
}
<div class="page-header">
    <h2>添加Said&nbsp;&nbsp;<small>&gt;添加一篇Said</small></h2>
</div>
<ol class="breadcrumb">
    <li><a href="#">Home</a></li>
    <li><a href="#">Siad管理</a></li>
    <li class="active">添加Said</li>
</ol>
<div class="main-context">
    <form name="saidForm" method="post" ms-controller="blog" novalidate spellcheck="false">
        <div class="said-article">
            <div class="said-title-con">
                <input name="bTitle" ms-duplex="bTitle" class="said-title" ms-class="said-error:!bTitle.length" autocomplete="off" placeholder="文章标题" required />
            </div>
            <div class="said-context-content">
                <textarea name="bContext" class="said-context" ms-duplex="bContext" required>这中间有个said的水印图啊，在bootstrap见过一个【缩略语】的排版，非常奈斯啊啊！！！！</textarea>
            </div>
            <button class="btn btn-lg said-priview center-block" id="previewSaid" type="button">预览</button>
        </div>
        @*ms-controller="defaultsDatas"*@
        <div class="row said-view-container">
            <div class="col-md-6">
                <div class="panel panel-default relative-container">
                    <div class="panel-heading">附加信息</div>
                    <div class="panel-body">
                        <div class="input-group" ms-controller="tagController">
                            <span class="input-group-addon">标签</span>
                            <input type="text" class="tag-input" ms-duplex="bTag" name="sTag" placeholder='标签，支持[tab]分隔' autocomplete="off" id="stag" ms-widget="groupInput" required />
                        </div>
                        <div class="input-group" ms-class="has-error:!classify.length" ms-controller="classifyController">
                            <span class="input-group-addon">分类</span>
                            <input type="text" name="classify" class="classify-input" ms-duplex="classify" placeholder="分类名称" autocomplete="off" ms-widget="groupInput" />
                        </div>
                    </div>
                </div>
                <div class="panel panel-default relative-container">
                    <div class="said-mask">
                        <span>上传缩略图</span>
                        <div class="progress">
                            <div style="width: 0;" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-info">
                                <span class="sr-only"></span>
                            </div>
                        </div>
                        <input type="file" name="saidSummayImgFile" data-ng-model="article.saidSummayImg" class="hidden-file" />
                        <input type="hidden" name="saidSummayImg" data-ng-model="article.saidSummayImg" />
                    </div>
                    <div class="panel-heading">描述</div>
                    <div class="panel-body">
                        <div class="col-md-4">
                            <div class="music-img">
                                <div class="thumbnail">
                                    <img src="../../Content/Images/test-said-img.jpg" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <textarea class="said-dis" data-ng-model="article.sSummary" data-ng-class="{ 'said-error':saidForm.sSummary.$invalid&&(saidForm.sSummary.$dirty||article.dirty) }" name="sSummary" placeholder="简介[支持HTML]" required></textarea>
                            <div class="songOp-btn song-up-content">
                                <button id="summaryImgDelete" class="btn btn-danger songBtn" type="button">删除</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading ">可选信息</div>
                    <div class="panel-body">
                        <div class="input-group">
                            <span class="input-group-addon">文件</span>
                            <input type="text" name="sName" class="form-control" ms-duplex="bName" placeholder="文章发布的（文件）名称">
                        </div>
                        <div class="form-group">
                            <label>JavaScript</label>
                            <textarea rows="3" class="form-control" name="sJS" placeholder="自定义JavaScript" ms-duplex="bJS"></textarea>
                        </div>
                        <div class="form-group">
                            <label>CSS</label>
                            <textarea rows="3" class="form-control" name="sCSS" placeholder="自定义CSS" ms-duplex="bCSS"></textarea>
                        </div>
                        <div class="checkbox said-checkbox">
                            <label>
                                <input type="checkbox" ms-duplex-checked="bReprint" name="sReprint" />是否转载</label><label>
                                    <input type="checkbox" ms-duplex-checked="bIsTop" name="bIsTop" />是否置顶</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="submit-container">
            <div class="error-check">
                发布前会进行错误检测
            </div>
            <div class="progress">
                <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 22%">
                    <span class="sr-only">20% Complete</span>
                </div>
            </div>
            <button class="btn btn-lg said-submit center-block" id="submit" type="submit" data-ng-click="article.submitForm(saidForm)">发布</button>
            <!--data-ng-class="{'submit-lock':!saidForm.$valid}"-->
        </div>
    </form>
</div>

@section Css{
    <link href="@Url.Content("~/Content/Back/Style/addSaid.css")" rel="stylesheet" />
}
@section HeadJs{
    <script type="text/template" id="autoCompleteTemplate">
      <div class="queryInputBar" ms-widget="autoComplete,$,$acOption">
        @*<input type="text" name="classify" class="form-control" ms-duplex="classify" placeholder="分类名称" autocomplete="off" />*@
        <div class="querySelect" style="ms-css-display:filter.length">
            <a class="select-item" href="javascript:;" ms-repeat-item="filter" data-index="{{$index}}">{{item}}</a>
        </div>
      </div>
    </script>
    @*<script src="@Url.Content("~/Content/Back/JavaScript/avalon/plus/autoComplete.js")"></script>*@

}
@section FootJs{
    <script type="text/javascript">
        require.config({
            baseUrl: '/Content/Back/JavaScript',
            paths: {
                'avalon': 'avalon/avalon.mobile.min',
                'groupInput': 'avalon/plus/groupInput',
            },
            packages: [
            {
                name: 'so',
                location: 'so',
                main: 'so'
            },
            {
                name: 'said',
                location: 'said',
                main: 'said'
            }],
            shim: {
                avalon: { exports: "avalon" }
            }
        });
        var defaultValue = {
            tags: ['split'],
            classifyList: ['HTML', 'CSS', 'linkFly', 'C#', 'Bootstrap', 'JavaScript', 'XML']
        };
        require(['jquery', 'so', 'so/plug/search', 'avalon', 'groupInput'], function ($, so, Search, avalon) {

            $(function () {
                var vmBlog = avalon.define({
                    $id: 'blog',
                    bTitle: '',
                    bTag: '',
                    bSummary: '',
                    bReprint: '',
                    bScript: '',
                    bIsTop: '',
                    bHTML: '',
                    bCSS: '',
                    bContext: '',
                    bImg: '',
                    classify: 'linkFly',
                    $skipArray: ['bTag', 'bImg'],
                    preview: function () {

                    },
                    check: function () {

                    },
                    save: function () {

                    }
                });
                avalon.define({
                    $id: 'tagController',
                    tags: defaultValue.tags,
                    groupInput: {
                        datas: defaultValue.classifyList,
                        multiple: true,
                        zIndex: 5,
                        values: new Array(20).join('bootstrap.').split('.')
                    }
                });
                avalon.define({
                    $id: 'classifyController',
                    groupInput: {
                        datas: defaultValue.classifyList,
                        zIndex: 4,
                        custom: false
                        //classContaier: 'queryInputBar'
                    }
                });

                //var vmBlog = avalon.define('blog', function (vm) {
                //    vm.BTitle = '';
                //});
                avalon.scan();

            });
        });
    </script>
}